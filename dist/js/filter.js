(()=>{"use strict";var t,e={484:(t,e,i)=>{const o=Vue;var r={class:"pill-filter overflow-hidden relative",ref:"viewport"},s={class:"pt-2 pb-3"},n={class:"px-3 text-xs uppercase font-bold tracking-wide flex justify-between items-center"},a={key:0,fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-5"},l=[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"},null,-1)];const c={name:"Pill",props:{active:{type:Boolean,required:!0}}};var h=i(379),p=i.n(h),d=i(481),u={insert:"head",singleton:!1};p()(d.Z,u);d.Z.locals;var v=i(744);const f=(0,v.Z)(c,[["render",function(t,e,i,r,s,n){return(0,o.openBlock)(),(0,o.createElementBlock)("button",{class:(0,o.normalizeClass)(["pill-element rounded cursor-pointer font-bold text-sm p-2 px-4 mr-2 mt-2 select-none whitespace-nowrap active:ring",{"--active":i.active}])},[(0,o.renderSlot)(t.$slots,"default")],2)}]]),g=t=>Math.max(t.offsetHeight,t.scrollHeight);class m{constructor(t={}){const e={content:t.viewport.children[0],direction:"all",pointerMode:"all",scrollMode:void 0,bounce:!0,bounceForce:.1,friction:.05,textSelection:!1,inputsFocus:!0,emulateScroll:!1,preventDefaultOnEmulateScroll:!1,preventPointerMoveDefault:!0,lockScrollOnDragDirection:!1,pointerDownPreventDefault:!0,dragDirectionTolerance:40,onPointerDown(){},onPointerUp(){},onPointerMove(){},onClick(){},onUpdate(){},onWheel(){},shouldScroll:()=>!0};if(this.props={...e,...t},!(this.props.viewport&&this.props.viewport instanceof Element))return void console.error('ScrollBooster init error: "viewport" config property must be present and must be Element');if(!this.props.content)return void console.error("ScrollBooster init error: Viewport does not have any content");this.isDragging=!1,this.isTargetScroll=!1,this.isScrolling=!1,this.isRunning=!1;const i={x:0,y:0};this.position={...i},this.velocity={...i},this.dragStartPosition={...i},this.dragOffset={...i},this.clientOffset={...i},this.dragPosition={...i},this.targetPosition={...i},this.scrollOffset={...i},this.rafID=null,this.events={},this.updateMetrics(),this.handleEvents()}updateOptions(t={}){this.props={...this.props,...t},this.props.onUpdate(this.getState()),this.startAnimationLoop()}updateMetrics(){var t;this.viewport={width:this.props.viewport.clientWidth,height:this.props.viewport.clientHeight},this.content={width:(t=this.props.content,Math.max(t.offsetWidth,t.scrollWidth)),height:g(this.props.content)},this.edgeX={from:Math.min(-this.content.width+this.viewport.width,0),to:0},this.edgeY={from:Math.min(-this.content.height+this.viewport.height,0),to:0},this.props.onUpdate(this.getState()),this.startAnimationLoop()}startAnimationLoop(){this.isRunning=!0,cancelAnimationFrame(this.rafID),this.rafID=requestAnimationFrame((()=>this.animate()))}animate(){if(!this.isRunning)return;this.updateScrollPosition(),this.isMoving()||(this.isRunning=!1,this.isTargetScroll=!1);const t=this.getState();this.setContentPosition(t),this.props.onUpdate(t),this.rafID=requestAnimationFrame((()=>this.animate()))}updateScrollPosition(){this.applyEdgeForce(),this.applyDragForce(),this.applyScrollForce(),this.applyTargetForce();const t=1-this.props.friction;this.velocity.x*=t,this.velocity.y*=t,"vertical"!==this.props.direction&&(this.position.x+=this.velocity.x),"horizontal"!==this.props.direction&&(this.position.y+=this.velocity.y),this.props.bounce&&!this.isScrolling||this.isTargetScroll||(this.position.x=Math.max(Math.min(this.position.x,this.edgeX.to),this.edgeX.from),this.position.y=Math.max(Math.min(this.position.y,this.edgeY.to),this.edgeY.from))}applyForce(t){this.velocity.x+=t.x,this.velocity.y+=t.y}applyEdgeForce(){if(!this.props.bounce||this.isDragging)return;const t=this.position.x<this.edgeX.from,e=this.position.x>this.edgeX.to,i=this.position.y<this.edgeY.from,o=this.position.y>this.edgeY.to,r=t||e,s=i||o;if(!r&&!s)return;const n=t?this.edgeX.from:this.edgeX.to,a=i?this.edgeY.from:this.edgeY.to,l=n-this.position.x,c=a-this.position.y,h={x:l*this.props.bounceForce,y:c*this.props.bounceForce},p=this.position.x+(this.velocity.x+h.x)/this.props.friction,d=this.position.y+(this.velocity.y+h.y)/this.props.friction;(t&&p>=this.edgeX.from||e&&p<=this.edgeX.to)&&(h.x=l*this.props.bounceForce-this.velocity.x),(i&&d>=this.edgeY.from||o&&d<=this.edgeY.to)&&(h.y=c*this.props.bounceForce-this.velocity.y),this.applyForce({x:r?h.x:0,y:s?h.y:0})}applyDragForce(){if(!this.isDragging)return;const t=this.dragPosition.x-this.position.x,e=this.dragPosition.y-this.position.y;this.applyForce({x:t-this.velocity.x,y:e-this.velocity.y})}applyScrollForce(){this.isScrolling&&(this.applyForce({x:this.scrollOffset.x-this.velocity.x,y:this.scrollOffset.y-this.velocity.y}),this.scrollOffset.x=0,this.scrollOffset.y=0)}applyTargetForce(){this.isTargetScroll&&this.applyForce({x:.08*(this.targetPosition.x-this.position.x)-this.velocity.x,y:.08*(this.targetPosition.y-this.position.y)-this.velocity.y})}isMoving(){return this.isDragging||this.isScrolling||Math.abs(this.velocity.x)>=.01||Math.abs(this.velocity.y)>=.01}scrollTo(t={}){this.isTargetScroll=!0,this.targetPosition.x=-t.x||0,this.targetPosition.y=-t.y||0,this.startAnimationLoop()}setPosition(t={}){this.velocity.x=0,this.velocity.y=0,this.position.x=-t.x||0,this.position.y=-t.y||0,this.startAnimationLoop()}getState(){return{isMoving:this.isMoving(),isDragging:!(!this.dragOffset.x&&!this.dragOffset.y),position:{x:-this.position.x,y:-this.position.y},dragOffset:this.dragOffset,dragAngle:this.getDragAngle(this.clientOffset.x,this.clientOffset.y),borderCollision:{left:this.position.x>=this.edgeX.to,right:this.position.x<=this.edgeX.from,top:this.position.y>=this.edgeY.to,bottom:this.position.y<=this.edgeY.from}}}getDragAngle(t,e){return Math.round(Math.atan2(t,e)*(180/Math.PI))}getDragDirection(t,e){return Math.abs(90-Math.abs(t))<=90-e?"horizontal":"vertical"}setContentPosition(t){"transform"===this.props.scrollMode&&(this.props.content.style.transform=`translate(${-t.position.x}px, ${-t.position.y}px)`),"native"===this.props.scrollMode&&(this.props.viewport.scrollTop=t.position.y,this.props.viewport.scrollLeft=t.position.x)}handleEvents(){const t={x:0,y:0},e={x:0,y:0};let i=null,o=null,r=!1;const s=o=>{if(!this.isDragging)return;const s=r?o.touches[0]:o,{pageX:n,pageY:a,clientX:l,clientY:c}=s;this.dragOffset.x=n-t.x,this.dragOffset.y=a-t.y,this.clientOffset.x=l-e.x,this.clientOffset.y=c-e.y,(Math.abs(this.clientOffset.x)>5&&!i||Math.abs(this.clientOffset.y)>5&&!i)&&(i=this.getDragDirection(this.getDragAngle(this.clientOffset.x,this.clientOffset.y),this.props.dragDirectionTolerance)),this.props.lockScrollOnDragDirection&&"all"!==this.props.lockScrollOnDragDirection?i===this.props.lockScrollOnDragDirection&&r?(this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y):r?(this.dragPosition.x=this.dragStartPosition.x,this.dragPosition.y=this.dragStartPosition.y):(this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y):(this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y)};this.events.pointerdown=i=>{r=!(!i.touches||!i.touches[0]),this.props.onPointerDown(this.getState(),i,r);const o=r?i.touches[0]:i,{pageX:n,pageY:a,clientX:l,clientY:c}=o,{viewport:h}=this.props,p=h.getBoundingClientRect();if(l-p.left>=h.clientLeft+h.clientWidth)return;if(c-p.top>=h.clientTop+h.clientHeight)return;if(!this.props.shouldScroll(this.getState(),i))return;if(2===i.button)return;if("mouse"===this.props.pointerMode&&r)return;if("touch"===this.props.pointerMode&&!r)return;if(!(this.props.inputsFocus&&["input","textarea","button","select","label"].indexOf(i.target.nodeName.toLowerCase())>-1)){if(this.props.textSelection){const t=((t,e,i)=>{const o=t.childNodes,r=document.createRange();for(let t=0;t<o.length;t++){const s=o[t];if(3!==s.nodeType)continue;r.selectNodeContents(s);const n=r.getBoundingClientRect();if(e>=n.left&&i>=n.top&&e<=n.right&&i<=n.bottom)return s}return!1})(i.target,l,c);if(t)return;(()=>{const t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())})()}this.isDragging=!0,t.x=n,t.y=a,e.x=l,e.y=c,this.dragStartPosition.x=this.position.x,this.dragStartPosition.y=this.position.y,s(i),this.startAnimationLoop(),!r&&this.props.pointerDownPreventDefault&&i.preventDefault()}},this.events.pointermove=t=>{!t.cancelable||"all"!==this.props.lockScrollOnDragDirection&&this.props.lockScrollOnDragDirection!==i||t.preventDefault(),s(t),this.props.onPointerMove(this.getState(),t,r)},this.events.pointerup=t=>{this.isDragging=!1,i=null,this.props.onPointerUp(this.getState(),t,r)},this.events.wheel=t=>{const e=this.getState();this.props.emulateScroll&&(this.velocity.x=0,this.velocity.y=0,this.isScrolling=!0,this.scrollOffset.x=-t.deltaX,this.scrollOffset.y=-t.deltaY,this.props.onWheel(e,t),this.startAnimationLoop(),clearTimeout(o),o=setTimeout((()=>this.isScrolling=!1),80),this.props.preventDefaultOnEmulateScroll&&this.getDragDirection(this.getDragAngle(-t.deltaX,-t.deltaY),this.props.dragDirectionTolerance)===this.props.preventDefaultOnEmulateScroll&&t.preventDefault())},this.events.scroll=()=>{const{scrollLeft:t,scrollTop:e}=this.props.viewport;Math.abs(this.position.x+t)>3&&(this.position.x=-t,this.velocity.x=0),Math.abs(this.position.y+e)>3&&(this.position.y=-e,this.velocity.y=0)},this.events.click=t=>{const e=this.getState(),i="vertical"!==this.props.direction?e.dragOffset.x:0,o="horizontal"!==this.props.direction?e.dragOffset.y:0;Math.max(Math.abs(i),Math.abs(o))>5&&(t.preventDefault(),t.stopPropagation()),this.props.onClick(e,t,r)},this.events.contentLoad=()=>this.updateMetrics(),this.events.resize=()=>this.updateMetrics(),this.props.viewport.addEventListener("mousedown",this.events.pointerdown),this.props.viewport.addEventListener("touchstart",this.events.pointerdown,{passive:!1}),this.props.viewport.addEventListener("click",this.events.click),this.props.viewport.addEventListener("wheel",this.events.wheel,{passive:!1}),this.props.viewport.addEventListener("scroll",this.events.scroll),this.props.content.addEventListener("load",this.events.contentLoad,!0),window.addEventListener("mousemove",this.events.pointermove),window.addEventListener("touchmove",this.events.pointermove,{passive:!1}),window.addEventListener("mouseup",this.events.pointerup),window.addEventListener("touchend",this.events.pointerup),window.addEventListener("resize",this.events.resize)}destroy(){this.props.viewport.removeEventListener("mousedown",this.events.pointerdown),this.props.viewport.removeEventListener("touchstart",this.events.pointerdown),this.props.viewport.removeEventListener("click",this.events.click),this.props.viewport.removeEventListener("wheel",this.events.wheel),this.props.viewport.removeEventListener("scroll",this.events.scroll),this.props.content.removeEventListener("load",this.events.contentLoad),window.removeEventListener("mousemove",this.events.pointermove),window.removeEventListener("touchmove",this.events.pointermove),window.removeEventListener("mouseup",this.events.pointerup),window.removeEventListener("touchend",this.events.pointerup),window.removeEventListener("resize",this.events.resize)}}const y={components:{Pill:f},emits:["change"],props:{resourceName:{type:String,required:!0},filterKey:{type:String,required:!0},lens:String},data:function(){return{isDragging:!1,scrollBooster:null,timeout:null,value:null}},created:function(){this.setCurrentFilterValue()},mounted:function(){var t=this;Nova.$on("filter-reset",this.setCurrentFilterValue),"drag"===this.filter.mode&&(this.timeout=setTimeout((function(){t.$refs.viewport&&t.$refs.content&&(t.scrollBooster=new m({viewport:t.$refs.viewport,content:t.$refs.content,scrollMode:"transform",direction:"horizontal",inputsFocus:!1,textSelection:!1,onUpdate:function(e){return t.isDragging=e.isDragging}}))}),2e3))},beforeUnmount:function(){Nova.$off("filter-reset",this.setCurrentFilterValue),this.timeout&&clearTimeout(this.timeout),this.scrollBooster&&this.scrollBooster.destroy()},methods:{setCurrentFilterValue:function(){this.value=this.filter.currentValue},setFilter:function(t){this.$store.commit("".concat(this.resourceName,"/updateFilterState"),{filterClass:this.filterKey,value:t}),this.$emit("change")},clearFilters:function(){this.setFilter("")},enableFilter:function(t){if(this.filter.single)return this.setFilter([t]);this.currentActive.includes(t)?this.currentActive.splice(this.currentActive.indexOf(t),1):this.currentActive.push(t),this.setFilter(this.currentActive)}},computed:{filter:function(){return this.$store.getters["".concat(this.resourceName,"/getFilter")](this.filterKey)},currentActive:function(){return this.filter.currentValue||[]}}},x=(0,v.Z)(y,[["render",function(t,e,i,c,h,p){var d=(0,o.resolveComponent)("Pill");return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("h3",n,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(p.filter.name),1),"drag"===p.filter.mode?((0,o.openBlock)(),(0,o.createElementBlock)("svg",a,l)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["flex mt-1 px-3",{"flex-wrap":"wrap"===p.filter.mode,grid:"stack"===p.filter.mode}]),ref:"content"},[p.filter.showSelectNoneButton?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,active:0===p.currentActive.length,class:(0,o.normalizeClass)({"pointer-events-none":t.isDragging}),onClick:e[0]||(e[0]=function(t){return p.clearFilters()})},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(p.filter.noneLabel),1)]})),_:1},8,["active","class"])):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(p.filter.options,(function(e){return(0,o.openBlock)(),(0,o.createBlock)(d,{key:e.value,class:(0,o.normalizeClass)({"pointer-events-none":t.isDragging}),active:p.currentActive.includes(e.value),onClick:function(t){return p.enableFilter(e.value)}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(e.label),1)]})),_:2},1032,["class","active","onClick"])})),128))],2)])],512)}]]);Nova.booting((function(t,e){t.component("pill-filter",x)}))},481:(t,e,i)=>{i.d(e,{Z:()=>s});var o=i(645),r=i.n(o)()((function(t){return t[1]}));r.push([t.id,".dark .pill-element.\\--active{background:rgba(var(--colors-primary-500));color:rgba(var(--colors-gray-800))}.dark .pill-element.\\--active:hover{background:rgba(var(--colors-primary-400));color:rgba(var(--colors-gray-800))}.dark .pill-element{--tw-ring-color:rgba(var(--colors-gray-600));background:rgba(var(--colors-gray-800));color:rgba(var(--colors-gray-400))}.dark .pill-element:hover{background:rgba(var(--colors-gray-700));color:rgba(var(--colors-gray-200))}.pill-element{--tw-ring-color:rgba(var(--colors-primary-200));background:rgba(var(--colors-gray-100))}.pill-element,.pill-element:hover{color:rgba(var(--colors-gray-500))}.pill-element:hover{background:rgba(var(--colors-gray-200))}.pill-element.\\--active{background:rgba(var(--colors-primary-500));color:#fff}.pill-element.\\--active:hover{background:rgba(var(--colors-primary-400))}",""]);const s=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,o){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(o)for(var s=0;s<this.length;s++){var n=this[s][0];null!=n&&(r[n]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);o&&r[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},962:()=>{},379:(t,e,i)=>{var o,r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},s=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),n=[];function a(t){for(var e=-1,i=0;i<n.length;i++)if(n[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},o=[],r=0;r<t.length;r++){var s=t[r],l=e.base?s[0]+e.base:s[0],c=i[l]||0,h="".concat(l," ").concat(c);i[l]=c+1;var p=a(h),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==p?(n[p].references++,n[p].updater(d)):n.push({identifier:h,updater:g(d,e),references:1}),o.push(h)}return o}function c(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var r=i.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var n=s(t.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(e)}return e}var h,p=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function d(t,e,i,o){var r=i?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=p(e,r);else{var s=document.createTextNode(r),n=t.childNodes;n[e]&&t.removeChild(n[e]),n.length?t.insertBefore(s,n[e]):t.appendChild(s)}}function u(t,e,i){var o=i.css,r=i.media,s=i.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var v=null,f=0;function g(t,e){var i,o,r;if(e.singleton){var s=f++;i=v||(v=c(e)),o=d.bind(null,i,s,!1),r=d.bind(null,i,s,!0)}else i=c(e),o=u.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var i=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<i.length;o++){var r=a(i[o]);n[r].references--}for(var s=l(t,e),c=0;c<i.length;c++){var h=a(i[c]);0===n[h].references&&(n[h].updater(),n.splice(h,1))}i=s}}}},744:(t,e)=>{e.Z=(t,e)=>{const i=t.__vccOpts||t;for(const[t,o]of e)i[t]=o;return i}}},i={};function o(t){var r=i[t];if(void 0!==r)return r.exports;var s=i[t]={id:t,exports:{}};return e[t](s,s.exports,o),s.exports}o.m=e,t=[],o.O=(e,i,r,s)=>{if(!i){var n=1/0;for(h=0;h<t.length;h++){for(var[i,r,s]=t[h],a=!0,l=0;l<i.length;l++)(!1&s||n>=s)&&Object.keys(o.O).every((t=>o.O[t](i[l])))?i.splice(l--,1):(a=!1,s<n&&(n=s));if(a){t.splice(h--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var h=t.length;h>0&&t[h-1][2]>s;h--)t[h]=t[h-1];t[h]=[i,r,s]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={599:0,458:0};o.O.j=e=>0===t[e];var e=(e,i)=>{var r,s,[n,a,l]=i,c=0;if(n.some((e=>0!==t[e]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(l)var h=l(o)}for(e&&e(i);c<n.length;c++)s=n[c],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(h)},i=self.webpackChunkdigital_creative_nova_pill_filter=self.webpackChunkdigital_creative_nova_pill_filter||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),o.nc=void 0,o.O(void 0,[458],(()=>o(484)));var r=o.O(void 0,[458],(()=>o(962)));r=o.O(r)})();